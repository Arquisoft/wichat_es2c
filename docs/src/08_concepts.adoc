ifndef::imagesdir[:imagesdir: ../images]

[[section-concepts]]
== Cross-cutting Concepts


ifdef::arc42help[]
[role="arc42help"]
****
.Content
This section describes overall, principal regulations and solution ideas that are relevant in multiple parts (= cross-cutting) of your system.
Such concepts are often related to multiple building blocks.
They can include many different topics, such as

* models, especially domain models
* architecture or design patterns
* rules for using specific technology
* principal, often technical decisions of an overarching (= cross-cutting) nature
* implementation rules


.Motivation
Concepts form the basis for _conceptual integrity_ (consistency, homogeneity) of the architecture. 
Thus, they are an important contribution to achieve inner qualities of your system.

Some of these concepts cannot be assigned to individual building blocks, e.g. security or safety. 


.Form
The form can be varied:

* concept papers with any kind of structure
* cross-cutting model excerpts or scenarios using notations of the architecture views
* sample implementations, especially for technical concepts
* reference to typical usage of standard frameworks (e.g. using Hibernate for object/relational mapping)

.Structure
A potential (but not mandatory) structure for this section could be:

* Domain concepts
* User Experience concepts (UX)
* Safety and security concepts
* Architecture and design patterns
* "Under-the-hood"
* development concepts
* operational concepts

Note: it might be difficult to assign individual concepts to one specific topic
on this list.

image::08-concepts-EN.drawio.png["Possible topics for crosscutting concepts"]


.Further Information

See https://docs.arc42.org/section-8/[Concepts] in the arc42 documentation.
****
endif::arc42help[]

=== _Domain concepts_

|===
| *Class* | *Explanation*
| User | The people using the application, playing matches and generating statistics of their own.
| Statistics | Given the performance of the player in its matches, relevant information is stored.
| Match | Created when the user starts a game and includes its general information and generated questions.
| Question | Questions spawned in a match, storing all its answers.
| Answer | Every answer associated to a match's question, saving if it was the correct option and if was selected by the player.
|===
**************AQUI EL MODELO DE DOMINIO DEL GAME******************


=== _"Under-the-hood"_

* *Backend*:  
  The server-side logic of the application is implemented using Node.js in combination with the Express framework. The backend handles client requests, communicates with external services such as Wikidata and Gemini, manages user sessions, interacts with the database and other functionalities.

* *Frontend*:  
  The frontend is developed using React, a component-based JavaScript library that enables the creation of dynamic and interactive user interfaces. The frontend is responsible for rendering the game interface, managing user input, and presenting questions, hints, and scores.

* *Database and persistence*:  
  MongoDB serves as the main data store, offering a flexible document-oriented model that aligns well with the evolving structure of game data. It stores user profiles, game progress, generated questions, and historical results in JSON-like documents.

* *LLM Integration*:  
  We utilize Gemini, a Large Language Model (LLM), to enhance the gameplay experience by generating intelligent and context-aware hints for each question in real time.

* *External Data Source*:  
  To keep the game content rich and dynamic, we integrate Wikidata as our primary external knowledge source. Through its public REST API, we query up-to-date and structured information about a wide range of topics. This enables automatic generation of questions based on real-world data.



=== _Development concepts_
* *Continuous integration and development*
Our way of working with github is having one developing branch towards which all pull requests are done 
and have to be reviewed by at least one team member. 
Sonar Cloud is set up so we know the testing coverage and whether we pass the quality gate with every pull request.
Once there is enough change in the develop branch with respect to the main one and it has enough quality we can 
merge them and make a release.

* *Testings*
One of the most important aspects is testing our application, and to achieve this, we will conduct different types of tests. On one hand, we will perform tests such as unit testing and usability testing. On the other hand, we will implement a continuous testing system using GitHub Actions, ensuring that all commits pass the required tests.

=== _Operational concepts_
* *Gateway service routing*
We will use a speciallized service that will route the requests to the corresponding service, acting as 
a single entry point for the application. Requests to the services are much simpler as only the api base 
endpoint and the action needs to be known and the gateway can also act as a filter to manage requests 
conditionally if needed. This approach also favors security as we can control which requests are actually 
sent based on its content or the context of the app.

=== _Safety and security concepts_
* *Authentication*
To keep our users' data secure an authentication mechanism has been developed with the use of JSON Web Tokens (JWT). If someone tries to access historical game records for certain users, our KaW application enforces to pass a valid token through the header of the message request.
In this way, only authenticated users are able to consult the different data that our application enforces.

* *Secure storage*
User passwords are never stored in plain text. Instead, secure hashing algorithms and encryption techniques are employed to protect sensitive information and prevent unauthorized access.

